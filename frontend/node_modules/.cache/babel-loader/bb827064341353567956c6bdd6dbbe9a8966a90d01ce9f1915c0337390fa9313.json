{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\linkedin\\\\frontend\\\\src\\\\pages\\\\Feed.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport Loader from \"../components/Loader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ENDPOINT = \"http://localhost:8081/api\";\nconst DEFAULT_AVATAR = \"https://ui-avatars.com/api/?name=Sin+Foto&background=random\";\nconst REACTIONS = [{\n  icon: \"👍\",\n  label: \"Like\"\n}, {\n  icon: \"❤️\",\n  label: \"Love\"\n}, {\n  icon: \"😂\",\n  label: \"Haha\"\n}, {\n  icon: \"😮\",\n  label: \"Wow\"\n}, {\n  icon: \"😢\",\n  label: \"Sad\"\n}, {\n  icon: \"😡\",\n  label: \"Angry\"\n}];\nconst getToken = () => localStorage.getItem(\"token\");\n\n// ==== API ====\nconst fetchUserProfile = async () => {\n  const token = getToken();\n  if (!token) throw new Error(\"No token\");\n  const res = await axios.get(`${ENDPOINT}/auth/me`, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  return res.data;\n};\nconst fetchFeed = async (page = 1, perPage = 10) => {\n  const token = getToken();\n  const res = await axios.get(`${ENDPOINT}/feed?page=${page}&perPage=${perPage}`, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  return res.data.posts || res.data || []; // <- ADAPTACIÓN\n};\nconst postFeed = async (mensaje, usuario, imagen, estado) => {\n  const token = getToken();\n  const form = new FormData();\n  form.append(\"username\", usuario.username);\n  form.append(\"avatar\", usuario.avatar);\n  form.append(\"mensaje\", mensaje);\n  form.append(\"estado\", estado);\n  form.append(\"tiempo\", new Date().toLocaleString(\"es-SV\"));\n  if (imagen) form.append(\"imagen\", imagen);\n  await axios.post(`${ENDPOINT}/feed`, form, {\n    headers: {\n      Authorization: \"Bearer \" + token,\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n};\nconst postComment = async (feedId, comment, user) => {\n  const token = getToken();\n  await axios.post(`${ENDPOINT}/feed/${feedId}/comment`, {\n    comment,\n    username: user.username,\n    avatar: user.avatar,\n    tiempo: new Date().toLocaleString(\"es-SV\")\n  }, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n};\nconst fetchComments = async feedId => {\n  const token = getToken();\n  const res = await axios.get(`${ENDPOINT}/feed/${feedId}/comments`, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  return res.data;\n};\nconst likePost = async (feedId, type = \"like\") => {\n  const token = getToken();\n  await axios.post(`${ENDPOINT}/feed/${feedId}/like`, {\n    type\n  }, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n};\nconst fetchLikes = async feedId => {\n  const token = getToken();\n  const res = await axios.get(`${ENDPOINT}/feed/${feedId}/likes`, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  return res.data;\n};\nconst favPost = async feedId => {\n  const token = getToken();\n  await axios.post(`${ENDPOINT}/feed/${feedId}/fav`, {}, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n};\nconst fetchFavs = async feedId => {\n  const token = getToken();\n  const res = await axios.get(`${ENDPOINT}/feed/${feedId}/favs`, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  return res.data;\n};\nconst editFeed = async (feedId, mensaje) => {\n  const token = getToken();\n  await axios.post(`${ENDPOINT}/feed/${feedId}/edit`, {\n    mensaje\n  }, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n};\nconst deleteFeed = async feedId => {\n  const token = getToken();\n  await axios.delete(`${ENDPOINT}/feed/${feedId}`, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n};\nconst Feed = () => {\n  _s();\n  const [usuario, setUsuario] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [feed, setFeed] = useState([]);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const [isFetchingMore, setIsFetchingMore] = useState(false);\n  const [dark, setDark] = useState(false);\n\n  // Composer\n  const [mensaje, setMensaje] = useState(\"\");\n  const [estado, setEstado] = useState(\"📝\");\n  const [publicando, setPublicando] = useState(false);\n  const [imagen, setImagen] = useState(null);\n  const [previewImg, setPreviewImg] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [notify, setNotify] = useState(\"\");\n  const inputRef = useRef(null);\n\n  // Scroll\n  const feedRef = useRef(null);\n\n  // --- Modal y paneles ---\n  const [openComments, setOpenComments] = useState(null);\n  const [editId, setEditId] = useState(null);\n  const [editMensaje, setEditMensaje] = useState(\"\");\n\n  // Estados feed para filtros\n  const [feedState, setFeedState] = useState(\"all\"); // \"all\", \"fav\", \"mine\"\n\n  useEffect(() => {\n    setLoading(true);\n    fetchUserProfile().then(setUsuario).catch(() => window.location.href = \"/login\");\n    fetchFeed(1).then(data => {\n      setFeed(Array.isArray(data) ? data : data.posts || []);\n      setHasMore((Array.isArray(data) ? data : data.posts || []).length >= 10);\n    }).finally(() => setLoading(false));\n  }, []);\n\n  // Scroll infinito\n  useEffect(() => {\n    const handleScroll = () => {\n      if (window.innerHeight + document.documentElement.scrollTop >= document.documentElement.offsetHeight - 350 && hasMore && !isFetchingMore) {\n        loadMoreFeed();\n      }\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  });\n  const loadMoreFeed = async () => {\n    setIsFetchingMore(true);\n    const nextPage = page + 1;\n    const data = await fetchFeed(nextPage);\n    setFeed(prev => [...prev, ...(Array.isArray(data) ? data : data.posts || [])]);\n    setPage(nextPage);\n    setHasMore((Array.isArray(data) ? data : data.posts || []).length >= 10);\n    setIsFetchingMore(false);\n  };\n\n  // Notificaciones\n  const showNotify = (msg, ok = true) => {\n    setNotify({\n      msg,\n      ok\n    });\n    setTimeout(() => setNotify(\"\"), 1800);\n  };\n\n  // Publicar mensaje\n  const handlePublicar = async () => {\n    if (!mensaje.trim()) {\n      setErrorMsg(\"No puedes publicar vacío.\");\n      inputRef.current.focus();\n      return;\n    }\n    setPublicando(true);\n    setErrorMsg(\"\");\n    try {\n      await postFeed(mensaje, usuario, imagen, estado);\n      setMensaje(\"\");\n      setImagen(null);\n      setPreviewImg(\"\");\n      showNotify(\"¡Publicado!\");\n      setPage(1);\n      const data = await fetchFeed(1);\n      setFeed(Array.isArray(data) ? data : data.posts || []);\n      setHasMore((Array.isArray(data) ? data : data.posts || []).length >= 10);\n    } catch (e) {\n      setErrorMsg(\"Error al publicar.\");\n      showNotify(\"Error al publicar.\", false);\n    } finally {\n      setPublicando(false);\n    }\n  };\n\n  // Edición\n  const startEdit = item => {\n    setEditId(item.id);\n    setEditMensaje(item.mensaje);\n  };\n  const handleEditSave = async () => {\n    await editFeed(editId, editMensaje);\n    showNotify(\"¡Editado!\");\n    setEditId(null);\n    setEditMensaje(\"\");\n    const data = await fetchFeed(1);\n    setFeed(Array.isArray(data) ? data : data.posts || []);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"¿Eliminar publicación?\")) return;\n    await deleteFeed(id);\n    showNotify(\"Eliminado.\");\n    const data = await fetchFeed(1);\n    setFeed(Array.isArray(data) ? data : data.posts || []);\n  };\n\n  // Filtrado por estado/fav/mis publicaciones\n  const filteredFeed = (feed || []).filter(item => {\n    if (feedState === \"all\") return true;\n    if (feedState === \"mine\") return item.username === usuario.username;\n    if (feedState === \"fav\") return (item.favs || []).includes(usuario.username);\n    if (feedState.startsWith(\"estado:\")) return item.estado === feedState.replace(\"estado:\", \"\");\n    return true;\n  });\n  if (loading || !usuario) return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 35\n  }, this);\n\n  // ---- UI ----\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: dark ? \"bg-[#181a24] min-h-screen\" : \"bg-[#f3f4fb] min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: notify && /*#__PURE__*/_jsxDEV(motion.div, {\n        className: `fixed top-3 left-1/2 z-[80] -translate-x-1/2 px-8 py-3 rounded-2xl shadow-lg text-base font-bold ${notify.ok ? \"bg-green-500 text-white\" : \"bg-red-500 text-white\"}`,\n        initial: {\n          opacity: 0,\n          y: -32\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        exit: {\n          opacity: 0,\n          y: -32\n        },\n        children: notify.msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: `sticky top-0 z-50 w-full py-5 px-4 flex items-center gap-4 bg-gradient-to-r ${dark ? \"from-violet-800 via-violet-700 to-violet-500\" : \"from-violet-100 via-white to-violet-50\"} shadow`,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: `font-bold text-2xl ${dark ? \"text-white\" : \"text-violet-700\"}`,\n        children: \"\\uD83D\\uDCF0 Feed comunidad\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2 ml-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setDark(d => !d),\n          className: `w-9 h-9 rounded-full flex items-center justify-center ${dark ? \"bg-white\" : \"bg-violet-200\"} transition-all shadow hover:scale-110`,\n          title: \"Modo claro/oscuro\",\n          children: dark ? /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-6 h-6 text-violet-800\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-6 h-6 text-violet-600\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            viewBox: \"0 0 24 24\",\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: \"12\",\n              cy: \"12\",\n              r: \"5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 1v2m0 18v2m8.66-13.66l-1.41 1.41M4.93 19.07l-1.41 1.41M21 12h-2M5 12H3m2.93-7.07l1.41 1.41M19.07 19.07l1.41 1.41\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ml-1 text-red-500 hover:underline font-semibold\",\n          onClick: () => {\n            localStorage.clear();\n            window.location.href = \"/login\";\n          },\n          children: \"Salir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"max-w-2xl mx-auto mt-4 flex gap-2 justify-center items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-3 py-1 rounded-full ${feedState === \"all\" ? \"bg-violet-600 text-white\" : \"bg-violet-100 text-violet-700\"} font-semibold`,\n        onClick: () => setFeedState(\"all\"),\n        children: \"Todo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-3 py-1 rounded-full ${feedState === \"mine\" ? \"bg-violet-600 text-white\" : \"bg-violet-100 text-violet-700\"} font-semibold`,\n        onClick: () => setFeedState(\"mine\"),\n        children: \"Mis publicaciones\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-3 py-1 rounded-full ${feedState === \"fav\" ? \"bg-violet-600 text-white\" : \"bg-violet-100 text-violet-700\"} font-semibold`,\n        onClick: () => setFeedState(\"fav\"),\n        children: \"Favoritos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"ml-2 px-2 py-1 rounded-full border-violet-200\",\n        value: feedState.startsWith(\"estado:\") ? feedState : \"\",\n        onChange: e => setFeedState(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Filtrar por estado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"estado:\\uD83D\\uDCDD\",\n          children: \"\\uD83D\\uDCDD Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"estado:\\uD83C\\uDFA8\",\n          children: \"\\uD83C\\uDFA8 Dise\\xF1o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"estado:\\u2753\",\n          children: \"\\u2753 Pregunta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"estado:\\uD83D\\uDD25\",\n          children: \"\\uD83D\\uDD25 Logro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"max-w-xl mx-auto mt-8 mb-3 p-4 bg-white/90 rounded-2xl shadow-md flex items-start gap-3 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: usuario.avatar ? `http://localhost:8081${usuario.avatar}` : DEFAULT_AVATAR,\n        className: \"w-12 h-12 rounded-full border-2 border-violet-200 object-cover\",\n        alt: \"avatar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 items-center mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"px-2 py-1 rounded-xl bg-violet-50 text-violet-700 font-semibold text-xs\",\n            value: estado,\n            onChange: e => setEstado(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\uD83D\\uDCDD\",\n              children: \"\\uD83D\\uDCDD Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\uD83C\\uDFA8\",\n              children: \"\\uD83C\\uDFA8 Dise\\xF1o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u2753\",\n              children: \"\\u2753 Pregunta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\uD83D\\uDD25\",\n              children: \"\\uD83D\\uDD25 Logro\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-auto text-xs text-gray-400\",\n            children: [mensaje.length, \"/350\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: inputRef,\n          value: mensaje,\n          onChange: e => setMensaje(e.target.value),\n          placeholder: \"\\xBFQu\\xE9 quieres compartir hoy?\",\n          className: `w-full px-4 py-2 rounded-xl border outline-none transition shadow-md ${dark ? \"bg-[#24243c] text-white border-violet-700\" : \"bg-white border-violet-200\"} focus:ring-2 focus:ring-violet-300 resize-none`,\n          rows: 2,\n          maxLength: 350,\n          disabled: publicando\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), previewImg && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: previewImg,\n            className: \"max-h-32 rounded-xl border border-violet-200 shadow\",\n            alt: \"preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ml-2 text-red-500 font-bold\",\n            onClick: () => {\n              setPreviewImg(\"\");\n              setImagen(null);\n            },\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-xs text-violet-700 cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              className: \"hidden\",\n              onChange: e => {\n                setImagen(e.target.files[0]);\n                const file = e.target.files[0];\n                if (file) {\n                  const reader = new FileReader();\n                  reader.onload = e2 => setPreviewImg(e2.target.result);\n                  reader.readAsDataURL(file);\n                }\n              },\n              disabled: publicando\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this), \"\\uD83D\\uDCCE Adjuntar imagen\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"px-4 py-1 bg-violet-500 text-white rounded-xl font-semibold shadow hover:bg-violet-700 transition\",\n            disabled: publicando,\n            onClick: handlePublicar,\n            children: publicando ? \"Publicando...\" : \"Publicar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), errorMsg && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500 text-xs\",\n            children: errorMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 26\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      ref: feedRef,\n      className: \"max-w-2xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: [filteredFeed.length === 0 && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 12\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: 12\n          },\n          className: \"text-center py-12 text-gray-400 font-semibold\",\n          children: \"No hay publicaciones a\\xFAn. \\xA1S\\xE9 el primero en compartir algo!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this), filteredFeed.map((item, i) => /*#__PURE__*/_jsxDEV(FeedItem, {\n          item: item,\n          dark: dark,\n          usuario: usuario,\n          onComment: () => setOpenComments(item.id),\n          onNotify: showNotify,\n          onEdit: () => startEdit(item),\n          onDelete: () => handleDelete(item.id),\n          isEditing: editId === item.id,\n          editMensaje: editMensaje,\n          setEditMensaje: setEditMensaje,\n          handleEditSave: handleEditSave,\n          onFav: () => favPost(item.id),\n          onRefresh: async () => {\n            const data = await fetchFeed(1);\n            setFeed(Array.isArray(data) ? data : data.posts || []);\n          }\n        }, item.id || i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), isFetchingMore && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center py-4\",\n        children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 11\n      }, this), !hasMore && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-gray-400 text-xs py-5\",\n        children: \"No hay m\\xE1s publicaciones.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: openComments && /*#__PURE__*/_jsxDEV(CommentModal, {\n        feedId: openComments,\n        onClose: () => setOpenComments(null),\n        usuario: usuario,\n        dark: dark,\n        onNotify: showNotify\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: `fixed bottom-0 left-0 w-full z-40 shadow-lg ${dark ? \"bg-[#23243a] border-t border-violet-900\" : \"bg-white\"}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between max-w-2xl mx-auto px-2 py-1\",\n        children: [{\n          name: \"Inicio\",\n          icon: \"🏠\",\n          path: \"/inicio\"\n        }, {\n          name: \"Feed\",\n          icon: \"📰\",\n          path: \"/feed\"\n        }, {\n          name: \"Portafolio\",\n          icon: \"💼\",\n          path: \"/portafolio\"\n        }, {\n          name: \"Mensajes\",\n          icon: \"💬\",\n          path: \"/mensajes\"\n        }, {\n          name: \"Perfil\",\n          icon: \"👤\",\n          path: \"/perfil\"\n        }].map(l => /*#__PURE__*/_jsxDEV(\"a\", {\n          href: l.path,\n          className: \"flex flex-col items-center justify-center flex-1 py-2 hover:bg-violet-50 transition rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl\",\n            children: l.icon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-xs ${dark ? \"text-white\" : \"text-violet-700\"}`,\n            children: l.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, this)]\n        }, l.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 5\n  }, this);\n};\n_s(Feed, \"jZfCdQIKO9KALYJhEcATrwiIK20=\");\n_c = Feed;\nfunction FeedItem({\n  item,\n  dark,\n  usuario,\n  onComment,\n  onNotify,\n  onEdit,\n  onDelete,\n  isEditing,\n  editMensaje,\n  setEditMensaje,\n  handleEditSave,\n  onFav,\n  onRefresh\n}) {\n  _s2();\n  const [likes, setLikes] = useState(item.likes || 0);\n  const [liked, setLiked] = useState(false);\n  const [favs, setFavs] = useState(item.favs || []);\n  const [isFav, setIsFav] = useState(false);\n  const [loadingLikes, setLoadingLikes] = useState(false);\n  const [reactions, setReactions] = useState({});\n  const [showReactions, setShowReactions] = useState(false);\n  const [showProfile, setShowProfile] = useState(false);\n  useEffect(() => {\n    fetchLikes(item.id).then(l => setLikes(l.count || l.length || 0));\n    fetchFavs(item.id).then(f => setFavs(f.list || []));\n    // Si el backend te da el estado: setIsFav(favs.includes(usuario.username));\n    // Opcional: determina si el usuario ya dio like/fav (requiere backend)\n  }, [item.id]);\n  const handleLike = async (type = \"like\") => {\n    setLoadingLikes(true);\n    try {\n      await likePost(item.id, type);\n      setLiked(true);\n      setShowReactions(false);\n      onNotify(`¡${REACTIONS.find(r => r.label.toLowerCase() === type).icon} Reacción enviada!`);\n      onRefresh();\n    } catch {\n      onNotify(\"Error al reaccionar\", false);\n    } finally {\n      setLoadingLikes(false);\n    }\n  };\n  const handleFav = async () => {\n    await onFav();\n    setIsFav(true);\n    onNotify(\"Agregado a favoritos!\");\n    onRefresh();\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0,\n      scale: 0.97,\n      y: 16\n    },\n    animate: {\n      opacity: 1,\n      scale: 1,\n      y: 0\n    },\n    exit: {\n      opacity: 0,\n      scale: 0.97,\n      y: 16\n    },\n    transition: {\n      duration: 0.17\n    },\n    className: `bg-white/90 rounded-2xl shadow-md p-4 flex gap-4 items-start mb-5 border border-violet-50 relative hover:shadow-lg transition`,\n    onMouseLeave: () => setShowProfile(false),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      onMouseEnter: () => setShowProfile(true),\n      onMouseLeave: () => setShowProfile(false),\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: item.avatar ? `http://localhost:8081${item.avatar}` : DEFAULT_AVATAR,\n        className: \"w-10 h-10 rounded-full border-2 border-violet-200 object-cover cursor-pointer\",\n        alt: \"avatar-feed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 9\n      }, this), showProfile && /*#__PURE__*/_jsxDEV(motion.div, {\n        className: `absolute z-30 left-12 top-0 bg-white rounded-2xl shadow-2xl px-5 py-4 w-60 border border-violet-100 ${dark ? \"bg-[#231a37] text-white\" : \"\"}`,\n        initial: {\n          opacity: 0,\n          x: -20\n        },\n        animate: {\n          opacity: 1,\n          x: 0\n        },\n        exit: {\n          opacity: 0,\n          x: -20\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-bold text-lg\",\n          children: item.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500 mb-1\",\n          children: item.estado || \"Miembro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500\",\n          children: item.tiempo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-violet-400 mt-2\",\n          children: [\"Publicaciones: \", item.publicCount || \"?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `font-bold text-violet-700 text-md ${dark ? \"text-violet-300\" : \"\"}`,\n          children: item.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-2 text-xs text-gray-400\",\n          children: item.tiempo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-2 text-xs\",\n          children: item.estado\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 11\n        }, this), item.username === usuario.username && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-auto flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"text-xs text-violet-500 hover:underline\",\n            onClick: onEdit,\n            children: \"Editar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"text-xs text-red-400 hover:underline\",\n            onClick: onDelete,\n            children: \"Eliminar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 9\n      }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2 mt-1 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: editMensaje,\n          onChange: e => setEditMensaje(e.target.value),\n          className: \"flex-1 px-3 py-2 rounded-xl border border-violet-200\",\n          rows: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-2 py-1 bg-green-500 text-white rounded-xl\",\n          onClick: handleEditSave,\n          children: \"Guardar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-2 py-1 bg-gray-400 text-white rounded-xl\",\n          onClick: () => {\n            setEditMensaje(\"\");\n          },\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `text-sm mt-1 mb-2 ${dark ? \"text-violet-100\" : \"text-gray-700\"}`,\n        children: item.mensaje\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 11\n      }, this), item.imagen && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `http://localhost:8081${item.imagen}`,\n        alt: \"media\",\n        className: \"mt-2 mb-1 max-w-xs rounded-lg shadow-lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-3 mt-2 text-xs\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `px-2 py-1 rounded-lg font-semibold hover:bg-violet-200 transition ${liked ? \"bg-violet-500 text-white\" : \"bg-violet-100 text-violet-800\"}`,\n            onClick: () => setShowReactions(s => !s),\n            disabled: loadingLikes || liked,\n            onMouseLeave: () => setShowReactions(false),\n            children: [liked ? \"Liked\" : \"Reaccionar\", \" \", likes > 0 && `· ${likes}`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 13\n          }, this), showReactions && /*#__PURE__*/_jsxDEV(motion.div, {\n            className: \"absolute left-0 top-9 bg-white rounded-2xl shadow-xl flex gap-2 px-3 py-2 border border-violet-100\",\n            initial: {\n              opacity: 0,\n              y: -8\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            exit: {\n              opacity: 0,\n              y: -8\n            },\n            children: REACTIONS.map(r => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleLike(r.label.toLowerCase()),\n              className: \"text-2xl hover:scale-125 transition\",\n              children: r.icon\n            }, r.label, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-2 py-1 rounded-lg bg-violet-100 text-violet-800 font-semibold hover:bg-violet-200\",\n          onClick: onComment,\n          children: \"Comentar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-2 py-1 rounded-lg font-semibold hover:bg-yellow-100 transition ${isFav ? \"bg-yellow-400 text-white\" : \"bg-yellow-100 text-yellow-800\"}`,\n          onClick: handleFav,\n          children: isFav ? \"Favorito\" : \"⭐ Fav\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 515,\n    columnNumber: 5\n  }, this);\n}\n_s2(FeedItem, \"eGz+yQV3LU8dtXbfLWmf0p4emcM=\");\n_c2 = FeedItem;\nfunction CommentModal({\n  feedId,\n  onClose,\n  usuario,\n  dark,\n  onNotify\n}) {\n  _s3();\n  const [comments, setComments] = useState([]);\n  const [cargando, setCargando] = useState(true);\n  const [comment, setComment] = useState(\"\");\n  const [publicando, setPublicando] = useState(false);\n  useEffect(() => {\n    setCargando(true);\n    fetchComments(feedId).then(setComments).finally(() => setCargando(false));\n  }, [feedId]);\n  const handleComment = async () => {\n    if (!comment.trim()) return;\n    setPublicando(true);\n    try {\n      await postComment(feedId, comment, usuario);\n      setComment(\"\");\n      onNotify(\"¡Comentario publicado!\");\n      const c = await fetchComments(feedId);\n      setComments(c);\n    } catch {\n      onNotify(\"Error al comentar\", false);\n    } finally {\n      setPublicando(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"fixed inset-0 z-50 flex items-center justify-center bg-black/40\",\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0\n    },\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      className: `max-w-lg w-full bg-white rounded-3xl shadow-xl p-7 relative ${dark ? \"bg-[#1a1430] text-white\" : \"\"}`,\n      initial: {\n        scale: 0.9,\n        y: 80\n      },\n      animate: {\n        scale: 1,\n        y: 0\n      },\n      exit: {\n        scale: 0.9,\n        y: 80\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute top-3 right-4 text-violet-400 hover:text-violet-800 font-bold text-lg\",\n        onClick: onClose,\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-bold text-xl mb-3\",\n        children: \"Comentarios\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 9\n      }, this), cargando ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-h-72 overflow-y-auto flex flex-col gap-3\",\n        children: [comments.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-400 text-sm\",\n          children: \"Sin comentarios a\\xFAn.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 15\n        }, this), comments.map((com, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: com.avatar ? `http://localhost:8081${com.avatar}` : DEFAULT_AVATAR,\n            className: \"w-9 h-9 rounded-full border-2 border-violet-200 object-cover\",\n            alt: \"avatar-com\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-bold text-violet-700 text-xs\",\n              children: com.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs\",\n              children: com.comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-[10px] text-gray-400\",\n              children: com.tiempo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 17\n          }, this)]\n        }, com.id || i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: `flex-1 px-4 py-2 rounded-xl border ${dark ? \"bg-[#251f39] text-white border-violet-800\" : \"bg-white border-violet-200\"} outline-none shadow`,\n          placeholder: \"Escribe un comentario...\",\n          value: comment,\n          onChange: e => setComment(e.target.value),\n          disabled: publicando,\n          maxLength: 200,\n          onKeyDown: e => e.key === \"Enter\" && handleComment()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-xl bg-violet-500 text-white font-semibold shadow hover:bg-violet-700\",\n          disabled: publicando,\n          onClick: handleComment,\n          children: publicando ? \"...\" : \"Enviar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 669,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 663,\n    columnNumber: 5\n  }, this);\n}\n_s3(CommentModal, \"OkOqlOkd2Wgq5PyRnBmyI35VXfE=\");\n_c3 = CommentModal;\nexport default Feed;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Feed\");\n$RefreshReg$(_c2, \"FeedItem\");\n$RefreshReg$(_c3, \"CommentModal\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","AnimatePresence","motion","Loader","jsxDEV","_jsxDEV","ENDPOINT","DEFAULT_AVATAR","REACTIONS","icon","label","getToken","localStorage","getItem","fetchUserProfile","token","Error","res","get","headers","Authorization","data","fetchFeed","page","perPage","posts","postFeed","mensaje","usuario","imagen","estado","form","FormData","append","username","avatar","Date","toLocaleString","post","postComment","feedId","comment","user","tiempo","fetchComments","likePost","type","fetchLikes","favPost","fetchFavs","editFeed","deleteFeed","delete","Feed","_s","setUsuario","loading","setLoading","feed","setFeed","setPage","hasMore","setHasMore","isFetchingMore","setIsFetchingMore","dark","setDark","setMensaje","setEstado","publicando","setPublicando","setImagen","previewImg","setPreviewImg","errorMsg","setErrorMsg","notify","setNotify","inputRef","feedRef","openComments","setOpenComments","editId","setEditId","editMensaje","setEditMensaje","feedState","setFeedState","then","catch","window","location","href","Array","isArray","length","finally","handleScroll","innerHeight","document","documentElement","scrollTop","offsetHeight","loadMoreFeed","addEventListener","removeEventListener","nextPage","prev","showNotify","msg","ok","setTimeout","handlePublicar","trim","current","focus","e","startEdit","item","id","handleEditSave","handleDelete","confirm","filteredFeed","filter","favs","includes","startsWith","replace","fileName","_jsxFileName","lineNumber","columnNumber","className","children","div","initial","opacity","y","animate","exit","onClick","d","title","fill","stroke","strokeWidth","viewBox","cx","cy","r","clear","value","onChange","target","src","alt","ref","placeholder","rows","maxLength","disabled","accept","files","file","reader","FileReader","onload","e2","result","readAsDataURL","map","i","FeedItem","onComment","onNotify","onEdit","onDelete","isEditing","onFav","onRefresh","CommentModal","onClose","name","path","l","_c","_s2","likes","setLikes","liked","setLiked","setFavs","isFav","setIsFav","loadingLikes","setLoadingLikes","reactions","setReactions","showReactions","setShowReactions","showProfile","setShowProfile","count","f","list","handleLike","find","toLowerCase","handleFav","scale","transition","duration","onMouseLeave","onMouseEnter","x","publicCount","s","_c2","_s3","comments","setComments","cargando","setCargando","setComment","handleComment","c","com","onKeyDown","key","_c3","$RefreshReg$"],"sources":["C:/Users/USER/Desktop/linkedin/frontend/src/pages/Feed.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport Loader from \"../components/Loader\";\r\n\r\nconst ENDPOINT = \"http://localhost:8081/api\";\r\nconst DEFAULT_AVATAR = \"https://ui-avatars.com/api/?name=Sin+Foto&background=random\";\r\nconst REACTIONS = [\r\n  { icon: \"👍\", label: \"Like\" },\r\n  { icon: \"❤️\", label: \"Love\" },\r\n  { icon: \"😂\", label: \"Haha\" },\r\n  { icon: \"😮\", label: \"Wow\" },\r\n  { icon: \"😢\", label: \"Sad\" },\r\n  { icon: \"😡\", label: \"Angry\" },\r\n];\r\n\r\nconst getToken = () => localStorage.getItem(\"token\");\r\n\r\n// ==== API ====\r\nconst fetchUserProfile = async () => {\r\n  const token = getToken();\r\n  if (!token) throw new Error(\"No token\");\r\n  const res = await axios.get(`${ENDPOINT}/auth/me`, {\r\n    headers: { Authorization: \"Bearer \" + token },\r\n  });\r\n  return res.data;\r\n};\r\nconst fetchFeed = async (page = 1, perPage = 10) => {\r\n  const token = getToken();\r\n  const res = await axios.get(`${ENDPOINT}/feed?page=${page}&perPage=${perPage}`, {\r\n    headers: { Authorization: \"Bearer \" + token },\r\n  });\r\n  return res.data.posts || res.data || []; // <- ADAPTACIÓN\r\n};\r\nconst postFeed = async (mensaje, usuario, imagen, estado) => {\r\n  const token = getToken();\r\n  const form = new FormData();\r\n  form.append(\"username\", usuario.username);\r\n  form.append(\"avatar\", usuario.avatar);\r\n  form.append(\"mensaje\", mensaje);\r\n  form.append(\"estado\", estado);\r\n  form.append(\"tiempo\", new Date().toLocaleString(\"es-SV\"));\r\n  if (imagen) form.append(\"imagen\", imagen);\r\n  await axios.post(`${ENDPOINT}/feed`, form, {\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n      \"Content-Type\": \"multipart/form-data\",\r\n    },\r\n  });\r\n};\r\nconst postComment = async (feedId, comment, user) => {\r\n  const token = getToken();\r\n  await axios.post(\r\n    `${ENDPOINT}/feed/${feedId}/comment`,\r\n    {\r\n      comment,\r\n      username: user.username,\r\n      avatar: user.avatar,\r\n      tiempo: new Date().toLocaleString(\"es-SV\"),\r\n    },\r\n    { headers: { Authorization: \"Bearer \" + token } }\r\n  );\r\n};\r\nconst fetchComments = async (feedId) => {\r\n  const token = getToken();\r\n  const res = await axios.get(`${ENDPOINT}/feed/${feedId}/comments`, {\r\n    headers: { Authorization: \"Bearer \" + token },\r\n  });\r\n  return res.data;\r\n};\r\nconst likePost = async (feedId, type = \"like\") => {\r\n  const token = getToken();\r\n  await axios.post(\r\n    `${ENDPOINT}/feed/${feedId}/like`,\r\n    { type },\r\n    { headers: { Authorization: \"Bearer \" + token } }\r\n  );\r\n};\r\nconst fetchLikes = async (feedId) => {\r\n  const token = getToken();\r\n  const res = await axios.get(`${ENDPOINT}/feed/${feedId}/likes`, {\r\n    headers: { Authorization: \"Bearer \" + token },\r\n  });\r\n  return res.data;\r\n};\r\nconst favPost = async (feedId) => {\r\n  const token = getToken();\r\n  await axios.post(`${ENDPOINT}/feed/${feedId}/fav`, {}, {\r\n    headers: { Authorization: \"Bearer \" + token },\r\n  });\r\n};\r\nconst fetchFavs = async (feedId) => {\r\n  const token = getToken();\r\n  const res = await axios.get(`${ENDPOINT}/feed/${feedId}/favs`, {\r\n    headers: { Authorization: \"Bearer \" + token },\r\n  });\r\n  return res.data;\r\n};\r\nconst editFeed = async (feedId, mensaje) => {\r\n  const token = getToken();\r\n  await axios.post(`${ENDPOINT}/feed/${feedId}/edit`, { mensaje }, {\r\n    headers: { Authorization: \"Bearer \" + token },\r\n  });\r\n};\r\nconst deleteFeed = async (feedId) => {\r\n  const token = getToken();\r\n  await axios.delete(`${ENDPOINT}/feed/${feedId}`, {\r\n    headers: { Authorization: \"Bearer \" + token },\r\n  });\r\n};\r\n\r\nconst Feed = () => {\r\n  const [usuario, setUsuario] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [feed, setFeed] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [isFetchingMore, setIsFetchingMore] = useState(false);\r\n  const [dark, setDark] = useState(false);\r\n\r\n  // Composer\r\n  const [mensaje, setMensaje] = useState(\"\");\r\n  const [estado, setEstado] = useState(\"📝\");\r\n  const [publicando, setPublicando] = useState(false);\r\n  const [imagen, setImagen] = useState(null);\r\n  const [previewImg, setPreviewImg] = useState(\"\");\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  const [notify, setNotify] = useState(\"\");\r\n  const inputRef = useRef(null);\r\n\r\n  // Scroll\r\n  const feedRef = useRef(null);\r\n\r\n  // --- Modal y paneles ---\r\n  const [openComments, setOpenComments] = useState(null);\r\n  const [editId, setEditId] = useState(null);\r\n  const [editMensaje, setEditMensaje] = useState(\"\");\r\n\r\n  // Estados feed para filtros\r\n  const [feedState, setFeedState] = useState(\"all\"); // \"all\", \"fav\", \"mine\"\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    fetchUserProfile()\r\n      .then(setUsuario)\r\n      .catch(() => (window.location.href = \"/login\"));\r\n\r\n    fetchFeed(1)\r\n      .then(data => {\r\n        setFeed(Array.isArray(data) ? data : data.posts || []);\r\n        setHasMore((Array.isArray(data) ? data : data.posts || []).length >= 10);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  // Scroll infinito\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (\r\n        window.innerHeight + document.documentElement.scrollTop\r\n        >= document.documentElement.offsetHeight - 350 &&\r\n        hasMore &&\r\n        !isFetchingMore\r\n      ) {\r\n        loadMoreFeed();\r\n      }\r\n    };\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  });\r\n\r\n  const loadMoreFeed = async () => {\r\n    setIsFetchingMore(true);\r\n    const nextPage = page + 1;\r\n    const data = await fetchFeed(nextPage);\r\n    setFeed(prev => [...prev, ...(Array.isArray(data) ? data : data.posts || [])]);\r\n    setPage(nextPage);\r\n    setHasMore((Array.isArray(data) ? data : data.posts || []).length >= 10);\r\n    setIsFetchingMore(false);\r\n  };\r\n\r\n  // Notificaciones\r\n  const showNotify = (msg, ok = true) => {\r\n    setNotify({ msg, ok });\r\n    setTimeout(() => setNotify(\"\"), 1800);\r\n  };\r\n\r\n  // Publicar mensaje\r\n  const handlePublicar = async () => {\r\n    if (!mensaje.trim()) {\r\n      setErrorMsg(\"No puedes publicar vacío.\");\r\n      inputRef.current.focus();\r\n      return;\r\n    }\r\n    setPublicando(true);\r\n    setErrorMsg(\"\");\r\n    try {\r\n      await postFeed(mensaje, usuario, imagen, estado);\r\n      setMensaje(\"\");\r\n      setImagen(null);\r\n      setPreviewImg(\"\");\r\n      showNotify(\"¡Publicado!\");\r\n      setPage(1);\r\n      const data = await fetchFeed(1);\r\n      setFeed(Array.isArray(data) ? data : data.posts || []);\r\n      setHasMore((Array.isArray(data) ? data : data.posts || []).length >= 10);\r\n    } catch (e) {\r\n      setErrorMsg(\"Error al publicar.\");\r\n      showNotify(\"Error al publicar.\", false);\r\n    } finally {\r\n      setPublicando(false);\r\n    }\r\n  };\r\n\r\n  // Edición\r\n  const startEdit = (item) => {\r\n    setEditId(item.id);\r\n    setEditMensaje(item.mensaje);\r\n  };\r\n  const handleEditSave = async () => {\r\n    await editFeed(editId, editMensaje);\r\n    showNotify(\"¡Editado!\");\r\n    setEditId(null);\r\n    setEditMensaje(\"\");\r\n    const data = await fetchFeed(1);\r\n    setFeed(Array.isArray(data) ? data : data.posts || []);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"¿Eliminar publicación?\")) return;\r\n    await deleteFeed(id);\r\n    showNotify(\"Eliminado.\");\r\n    const data = await fetchFeed(1);\r\n    setFeed(Array.isArray(data) ? data : data.posts || []);\r\n  };\r\n\r\n  // Filtrado por estado/fav/mis publicaciones\r\n  const filteredFeed = (feed || []).filter(item => {\r\n    if (feedState === \"all\") return true;\r\n    if (feedState === \"mine\") return item.username === usuario.username;\r\n    if (feedState === \"fav\") return (item.favs || []).includes(usuario.username);\r\n    if (feedState.startsWith(\"estado:\")) return item.estado === feedState.replace(\"estado:\", \"\");\r\n    return true;\r\n  });\r\n\r\n  if (loading || !usuario) return <Loader />;\r\n\r\n  // ---- UI ----\r\n  return (\r\n    <div className={dark ? \"bg-[#181a24] min-h-screen\" : \"bg-[#f3f4fb] min-h-screen\"}>\r\n\r\n      {/* NOTIFICACIÓN */}\r\n      <AnimatePresence>\r\n        {notify && (\r\n          <motion.div\r\n            className={`fixed top-3 left-1/2 z-[80] -translate-x-1/2 px-8 py-3 rounded-2xl shadow-lg text-base font-bold ${\r\n              notify.ok ? \"bg-green-500 text-white\" : \"bg-red-500 text-white\"\r\n            }`}\r\n            initial={{ opacity: 0, y: -32 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -32 }}\r\n          >\r\n            {notify.msg}\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* HEADER */}\r\n      <header className={`sticky top-0 z-50 w-full py-5 px-4 flex items-center gap-4 bg-gradient-to-r ${dark ? \"from-violet-800 via-violet-700 to-violet-500\" : \"from-violet-100 via-white to-violet-50\"} shadow`}>\r\n        <h1 className={`font-bold text-2xl ${dark ? \"text-white\" : \"text-violet-700\"}`}>📰 Feed comunidad</h1>\r\n        <div className=\"flex gap-2 ml-auto\">\r\n          <button\r\n            onClick={() => setDark((d) => !d)}\r\n            className={`w-9 h-9 rounded-full flex items-center justify-center ${dark ? \"bg-white\" : \"bg-violet-200\"} transition-all shadow hover:scale-110`}\r\n            title=\"Modo claro/oscuro\"\r\n          >\r\n            {dark ? (\r\n              <svg className=\"w-6 h-6 text-violet-800\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                <path d=\"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z\" />\r\n              </svg>\r\n            ) : (\r\n              <svg className=\"w-6 h-6 text-violet-600\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"5\" />\r\n                <path d=\"M12 1v2m0 18v2m8.66-13.66l-1.41 1.41M4.93 19.07l-1.41 1.41M21 12h-2M5 12H3m2.93-7.07l1.41 1.41M19.07 19.07l1.41 1.41\" />\r\n              </svg>\r\n            )}\r\n          </button>\r\n          <button\r\n            className=\"ml-1 text-red-500 hover:underline font-semibold\"\r\n            onClick={() => {\r\n              localStorage.clear();\r\n              window.location.href = \"/login\";\r\n            }}\r\n          >\r\n            Salir\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {/* FILTROS */}\r\n      <section className=\"max-w-2xl mx-auto mt-4 flex gap-2 justify-center items-center\">\r\n        <button className={`px-3 py-1 rounded-full ${feedState === \"all\" ? \"bg-violet-600 text-white\" : \"bg-violet-100 text-violet-700\"} font-semibold`} onClick={() => setFeedState(\"all\")}>Todo</button>\r\n        <button className={`px-3 py-1 rounded-full ${feedState === \"mine\" ? \"bg-violet-600 text-white\" : \"bg-violet-100 text-violet-700\"} font-semibold`} onClick={() => setFeedState(\"mine\")}>Mis publicaciones</button>\r\n        <button className={`px-3 py-1 rounded-full ${feedState === \"fav\" ? \"bg-violet-600 text-white\" : \"bg-violet-100 text-violet-700\"} font-semibold`} onClick={() => setFeedState(\"fav\")}>Favoritos</button>\r\n        <select className=\"ml-2 px-2 py-1 rounded-full border-violet-200\" value={feedState.startsWith(\"estado:\") ? feedState : \"\"} onChange={e => setFeedState(e.target.value)}>\r\n          <option value=\"\">Filtrar por estado</option>\r\n          <option value=\"estado:📝\">📝 Post</option>\r\n          <option value=\"estado:🎨\">🎨 Diseño</option>\r\n          <option value=\"estado:❓\">❓ Pregunta</option>\r\n          <option value=\"estado:🔥\">🔥 Logro</option>\r\n        </select>\r\n      </section>\r\n\r\n      {/* COMPOSER */}\r\n      <section className=\"max-w-xl mx-auto mt-8 mb-3 p-4 bg-white/90 rounded-2xl shadow-md flex items-start gap-3 relative\">\r\n        <img\r\n          src={usuario.avatar ? `http://localhost:8081${usuario.avatar}` : DEFAULT_AVATAR}\r\n          className=\"w-12 h-12 rounded-full border-2 border-violet-200 object-cover\"\r\n          alt=\"avatar\"\r\n        />\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex gap-2 items-center mb-2\">\r\n            <select className=\"px-2 py-1 rounded-xl bg-violet-50 text-violet-700 font-semibold text-xs\" value={estado} onChange={e => setEstado(e.target.value)}>\r\n              <option value=\"📝\">📝 Post</option>\r\n              <option value=\"🎨\">🎨 Diseño</option>\r\n              <option value=\"❓\">❓ Pregunta</option>\r\n              <option value=\"🔥\">🔥 Logro</option>\r\n            </select>\r\n            <span className=\"ml-auto text-xs text-gray-400\">{mensaje.length}/350</span>\r\n          </div>\r\n          <textarea\r\n            ref={inputRef}\r\n            value={mensaje}\r\n            onChange={e => setMensaje(e.target.value)}\r\n            placeholder=\"¿Qué quieres compartir hoy?\"\r\n            className={`w-full px-4 py-2 rounded-xl border outline-none transition shadow-md ${dark ? \"bg-[#24243c] text-white border-violet-700\" : \"bg-white border-violet-200\"} focus:ring-2 focus:ring-violet-300 resize-none`}\r\n            rows={2}\r\n            maxLength={350}\r\n            disabled={publicando}\r\n          />\r\n          {previewImg && (\r\n            <div className=\"flex items-center mt-2\">\r\n              <img src={previewImg} className=\"max-h-32 rounded-xl border border-violet-200 shadow\" alt=\"preview\" />\r\n              <button className=\"ml-2 text-red-500 font-bold\" onClick={() => { setPreviewImg(\"\"); setImagen(null); }}>✕</button>\r\n            </div>\r\n          )}\r\n          <div className=\"flex items-center gap-2 mt-2\">\r\n            <label className=\"text-xs text-violet-700 cursor-pointer\">\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                className=\"hidden\"\r\n                onChange={e => {\r\n                  setImagen(e.target.files[0]);\r\n                  const file = e.target.files[0];\r\n                  if (file) {\r\n                    const reader = new FileReader();\r\n                    reader.onload = e2 => setPreviewImg(e2.target.result);\r\n                    reader.readAsDataURL(file);\r\n                  }\r\n                }}\r\n                disabled={publicando}\r\n              />\r\n              📎 Adjuntar imagen\r\n            </label>\r\n            <button\r\n              className=\"px-4 py-1 bg-violet-500 text-white rounded-xl font-semibold shadow hover:bg-violet-700 transition\"\r\n              disabled={publicando}\r\n              onClick={handlePublicar}\r\n            >\r\n              {publicando ? \"Publicando...\" : \"Publicar\"}\r\n            </button>\r\n            {errorMsg && <span className=\"text-red-500 text-xs\">{errorMsg}</span>}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* FEED */}\r\n      <section ref={feedRef} className=\"max-w-2xl mx-auto\">\r\n        <AnimatePresence>\r\n          {filteredFeed.length === 0 && (\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 12 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: 12 }}\r\n              className=\"text-center py-12 text-gray-400 font-semibold\"\r\n            >\r\n              No hay publicaciones aún. ¡Sé el primero en compartir algo!\r\n            </motion.div>\r\n          )}\r\n          {filteredFeed.map((item, i) => (\r\n            <FeedItem\r\n              key={item.id || i}\r\n              item={item}\r\n              dark={dark}\r\n              usuario={usuario}\r\n              onComment={() => setOpenComments(item.id)}\r\n              onNotify={showNotify}\r\n              onEdit={() => startEdit(item)}\r\n              onDelete={() => handleDelete(item.id)}\r\n              isEditing={editId === item.id}\r\n              editMensaje={editMensaje}\r\n              setEditMensaje={setEditMensaje}\r\n              handleEditSave={handleEditSave}\r\n              onFav={() => favPost(item.id)}\r\n              onRefresh={async () => {\r\n                const data = await fetchFeed(1);\r\n                setFeed(Array.isArray(data) ? data : data.posts || []);\r\n              }}\r\n            />\r\n          ))}\r\n        </AnimatePresence>\r\n        {isFetchingMore && (\r\n          <div className=\"flex justify-center py-4\">\r\n            <Loader />\r\n          </div>\r\n        )}\r\n        {!hasMore && (\r\n          <div className=\"text-center text-gray-400 text-xs py-5\">No hay más publicaciones.</div>\r\n        )}\r\n      </section>\r\n\r\n      {/* MODAL DE COMENTARIOS */}\r\n      <AnimatePresence>\r\n        {openComments && (\r\n          <CommentModal\r\n            feedId={openComments}\r\n            onClose={() => setOpenComments(null)}\r\n            usuario={usuario}\r\n            dark={dark}\r\n            onNotify={showNotify}\r\n          />\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Barra de navegación inferior */}\r\n      <nav className={`fixed bottom-0 left-0 w-full z-40 shadow-lg ${dark ? \"bg-[#23243a] border-t border-violet-900\" : \"bg-white\"}`}>\r\n        <div className=\"flex items-center justify-between max-w-2xl mx-auto px-2 py-1\">\r\n          {[\r\n            { name: \"Inicio\", icon: \"🏠\", path: \"/inicio\" },\r\n            { name: \"Feed\", icon: \"📰\", path: \"/feed\" },\r\n            { name: \"Portafolio\", icon: \"💼\", path: \"/portafolio\" },\r\n            { name: \"Mensajes\", icon: \"💬\", path: \"/mensajes\" },\r\n            { name: \"Perfil\", icon: \"👤\", path: \"/perfil\" },\r\n          ].map(l => (\r\n            <a\r\n              href={l.path}\r\n              className=\"flex flex-col items-center justify-center flex-1 py-2 hover:bg-violet-50 transition rounded-xl\"\r\n              key={l.name}\r\n            >\r\n              <span className=\"text-xl\">{l.icon}</span>\r\n              <span className={`text-xs ${dark ? \"text-white\" : \"text-violet-700\"}`}>{l.name}</span>\r\n            </a>\r\n          ))}\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction FeedItem({\r\n  item,\r\n  dark,\r\n  usuario,\r\n  onComment,\r\n  onNotify,\r\n  onEdit,\r\n  onDelete,\r\n  isEditing,\r\n  editMensaje,\r\n  setEditMensaje,\r\n  handleEditSave,\r\n  onFav,\r\n  onRefresh,\r\n}) {\r\n  const [likes, setLikes] = useState(item.likes || 0);\r\n  const [liked, setLiked] = useState(false);\r\n  const [favs, setFavs] = useState(item.favs || []);\r\n  const [isFav, setIsFav] = useState(false);\r\n  const [loadingLikes, setLoadingLikes] = useState(false);\r\n  const [reactions, setReactions] = useState({});\r\n  const [showReactions, setShowReactions] = useState(false);\r\n  const [showProfile, setShowProfile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchLikes(item.id).then(l => setLikes(l.count || l.length || 0));\r\n    fetchFavs(item.id).then(f => setFavs(f.list || []));\r\n    // Si el backend te da el estado: setIsFav(favs.includes(usuario.username));\r\n    // Opcional: determina si el usuario ya dio like/fav (requiere backend)\r\n  }, [item.id]);\r\n\r\n  const handleLike = async (type = \"like\") => {\r\n    setLoadingLikes(true);\r\n    try {\r\n      await likePost(item.id, type);\r\n      setLiked(true);\r\n      setShowReactions(false);\r\n      onNotify(`¡${REACTIONS.find(r => r.label.toLowerCase() === type).icon} Reacción enviada!`);\r\n      onRefresh();\r\n    } catch {\r\n      onNotify(\"Error al reaccionar\", false);\r\n    } finally {\r\n      setLoadingLikes(false);\r\n    }\r\n  };\r\n\r\n  const handleFav = async () => {\r\n    await onFav();\r\n    setIsFav(true);\r\n    onNotify(\"Agregado a favoritos!\");\r\n    onRefresh();\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.97, y: 16 }}\r\n      animate={{ opacity: 1, scale: 1, y: 0 }}\r\n      exit={{ opacity: 0, scale: 0.97, y: 16 }}\r\n      transition={{ duration: 0.17 }}\r\n      className={`bg-white/90 rounded-2xl shadow-md p-4 flex gap-4 items-start mb-5 border border-violet-50 relative hover:shadow-lg transition`}\r\n      onMouseLeave={() => setShowProfile(false)}\r\n    >\r\n      <div\r\n        className=\"relative\"\r\n        onMouseEnter={() => setShowProfile(true)}\r\n        onMouseLeave={() => setShowProfile(false)}\r\n      >\r\n        <img\r\n          src={item.avatar ? `http://localhost:8081${item.avatar}` : DEFAULT_AVATAR}\r\n          className=\"w-10 h-10 rounded-full border-2 border-violet-200 object-cover cursor-pointer\"\r\n          alt=\"avatar-feed\"\r\n        />\r\n        {/* Mini perfil */}\r\n        {showProfile && (\r\n          <motion.div\r\n            className={`absolute z-30 left-12 top-0 bg-white rounded-2xl shadow-2xl px-5 py-4 w-60 border border-violet-100 ${dark ? \"bg-[#231a37] text-white\" : \"\"}`}\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: -20 }}\r\n          >\r\n            <div className=\"font-bold text-lg\">{item.username}</div>\r\n            <div className=\"text-xs text-gray-500 mb-1\">{item.estado || \"Miembro\"}</div>\r\n            <div className=\"text-xs text-gray-500\">{item.tiempo}</div>\r\n            <div className=\"text-xs text-violet-400 mt-2\">Publicaciones: {item.publicCount || \"?\"}</div>\r\n          </motion.div>\r\n        )}\r\n      </div>\r\n      <div className=\"flex-1\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className={`font-bold text-violet-700 text-md ${dark ? \"text-violet-300\" : \"\"}`}>\r\n            {item.username}\r\n          </span>\r\n          <span className=\"ml-2 text-xs text-gray-400\">{item.tiempo}</span>\r\n          <span className=\"ml-2 text-xs\">{item.estado}</span>\r\n          {item.username === usuario.username && (\r\n            <div className=\"ml-auto flex gap-2\">\r\n              <button className=\"text-xs text-violet-500 hover:underline\" onClick={onEdit}>Editar</button>\r\n              <button className=\"text-xs text-red-400 hover:underline\" onClick={onDelete}>Eliminar</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* Editar mensaje */}\r\n        {isEditing ? (\r\n          <div className=\"flex gap-2 mt-1 mb-2\">\r\n            <textarea\r\n              value={editMensaje}\r\n              onChange={e => setEditMensaje(e.target.value)}\r\n              className=\"flex-1 px-3 py-2 rounded-xl border border-violet-200\"\r\n              rows={2}\r\n            />\r\n            <button className=\"px-2 py-1 bg-green-500 text-white rounded-xl\" onClick={handleEditSave}>Guardar</button>\r\n            <button className=\"px-2 py-1 bg-gray-400 text-white rounded-xl\" onClick={() => { setEditMensaje(\"\"); }}>Cancelar</button>\r\n          </div>\r\n        ) : (\r\n          <div className={`text-sm mt-1 mb-2 ${dark ? \"text-violet-100\" : \"text-gray-700\"}`}>\r\n            {item.mensaje}\r\n          </div>\r\n        )}\r\n        {item.imagen && (\r\n          <img\r\n            src={`http://localhost:8081${item.imagen}`}\r\n            alt=\"media\"\r\n            className=\"mt-2 mb-1 max-w-xs rounded-lg shadow-lg\"\r\n          />\r\n        )}\r\n        <div className=\"flex gap-3 mt-2 text-xs\">\r\n          <div className=\"relative\">\r\n            <button\r\n              className={`px-2 py-1 rounded-lg font-semibold hover:bg-violet-200 transition ${\r\n                liked ? \"bg-violet-500 text-white\" : \"bg-violet-100 text-violet-800\"\r\n              }`}\r\n              onClick={() => setShowReactions(s => !s)}\r\n              disabled={loadingLikes || liked}\r\n              onMouseLeave={() => setShowReactions(false)}\r\n            >\r\n              {liked ? \"Liked\" : \"Reaccionar\"} {likes > 0 && `· ${likes}`}\r\n            </button>\r\n            {/* Reacciones */}\r\n            {showReactions && (\r\n              <motion.div className=\"absolute left-0 top-9 bg-white rounded-2xl shadow-xl flex gap-2 px-3 py-2 border border-violet-100\"\r\n                initial={{ opacity: 0, y: -8 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -8 }}\r\n              >\r\n                {REACTIONS.map(r => (\r\n                  <button key={r.label} onClick={() => handleLike(r.label.toLowerCase())} className=\"text-2xl hover:scale-125 transition\">\r\n                    {r.icon}\r\n                  </button>\r\n                ))}\r\n              </motion.div>\r\n            )}\r\n          </div>\r\n          <button\r\n            className=\"px-2 py-1 rounded-lg bg-violet-100 text-violet-800 font-semibold hover:bg-violet-200\"\r\n            onClick={onComment}\r\n          >\r\n            Comentar\r\n          </button>\r\n          <button\r\n            className={`px-2 py-1 rounded-lg font-semibold hover:bg-yellow-100 transition ${\r\n              isFav ? \"bg-yellow-400 text-white\" : \"bg-yellow-100 text-yellow-800\"\r\n            }`}\r\n            onClick={handleFav}\r\n          >\r\n            {isFav ? \"Favorito\" : \"⭐ Fav\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nfunction CommentModal({ feedId, onClose, usuario, dark, onNotify }) {\r\n  const [comments, setComments] = useState([]);\r\n  const [cargando, setCargando] = useState(true);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [publicando, setPublicando] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setCargando(true);\r\n    fetchComments(feedId)\r\n      .then(setComments)\r\n      .finally(() => setCargando(false));\r\n  }, [feedId]);\r\n\r\n  const handleComment = async () => {\r\n    if (!comment.trim()) return;\r\n    setPublicando(true);\r\n    try {\r\n      await postComment(feedId, comment, usuario);\r\n      setComment(\"\");\r\n      onNotify(\"¡Comentario publicado!\");\r\n      const c = await fetchComments(feedId);\r\n      setComments(c);\r\n    } catch {\r\n      onNotify(\"Error al comentar\", false);\r\n    } finally {\r\n      setPublicando(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n    >\r\n      <motion.div\r\n        className={`max-w-lg w-full bg-white rounded-3xl shadow-xl p-7 relative ${dark ? \"bg-[#1a1430] text-white\" : \"\"}`}\r\n        initial={{ scale: 0.9, y: 80 }}\r\n        animate={{ scale: 1, y: 0 }}\r\n        exit={{ scale: 0.9, y: 80 }}\r\n      >\r\n        <button\r\n          className=\"absolute top-3 right-4 text-violet-400 hover:text-violet-800 font-bold text-lg\"\r\n          onClick={onClose}\r\n        >✕</button>\r\n        <h3 className=\"font-bold text-xl mb-3\">Comentarios</h3>\r\n        {cargando ? (\r\n          <Loader />\r\n        ) : (\r\n          <div className=\"max-h-72 overflow-y-auto flex flex-col gap-3\">\r\n            {comments.length === 0 && (\r\n              <div className=\"text-gray-400 text-sm\">Sin comentarios aún.</div>\r\n            )}\r\n            {comments.map((com, i) => (\r\n              <div key={com.id || i} className=\"flex items-start gap-2\">\r\n                <img\r\n                  src={com.avatar ? `http://localhost:8081${com.avatar}` : DEFAULT_AVATAR}\r\n                  className=\"w-9 h-9 rounded-full border-2 border-violet-200 object-cover\"\r\n                  alt=\"avatar-com\"\r\n                />\r\n                <div>\r\n                  <div className=\"font-bold text-violet-700 text-xs\">{com.username}</div>\r\n                  <div className=\"text-xs\">{com.comment}</div>\r\n                  <div className=\"text-[10px] text-gray-400\">{com.tiempo}</div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n        <div className=\"mt-3 flex gap-2\">\r\n          <input\r\n            type=\"text\"\r\n            className={`flex-1 px-4 py-2 rounded-xl border ${dark ? \"bg-[#251f39] text-white border-violet-800\" : \"bg-white border-violet-200\"} outline-none shadow`}\r\n            placeholder=\"Escribe un comentario...\"\r\n            value={comment}\r\n            onChange={e => setComment(e.target.value)}\r\n            disabled={publicando}\r\n            maxLength={200}\r\n            onKeyDown={e => e.key === \"Enter\" && handleComment()}\r\n          />\r\n          <button\r\n            className=\"px-3 py-1 rounded-xl bg-violet-500 text-white font-semibold shadow hover:bg-violet-700\"\r\n            disabled={publicando}\r\n            onClick={handleComment}\r\n          >\r\n            {publicando ? \"...\" : \"Enviar\"}\r\n          </button>\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nexport default Feed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}